{"remainingRequest":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/src/views/category/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/src/views/category/Category.vue","mtime":1672369376011},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/node_modules/cache-loader/dist/cjs.js","mtime":1671701058468},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/node_modules/babel-loader/lib/index.js","mtime":1671701058672},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/node_modules/cache-loader/dist/cjs.js","mtime":1671701058468},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_admin/node_modules/vue-loader/lib/index.js","mtime":1671701059661}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5saXN0Q2F0ZWdvcmllcygpOwogICAgfSwKICAgIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0RlbGV0ZTogZmFsc2UsCiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgICAgICAgIGFkZE9yRWRpdDogZmFsc2UsCiAgICAgICAgICAgIGtleXdvcmRzOiBudWxsLAogICAgICAgICAgICBjYXRlZ29yeUlkTGlzdDogW10sCiAgICAgICAgICAgIGNhdGVnb3J5TGlzdDogW10sCiAgICAgICAgICAgIGNhdGVnb3J5Rm9ybTogewogICAgICAgICAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgICAgICAgICBjYXRlZ29yeU5hbWU6ICIiLAogICAgICAgICAgICAgICAgZW5jcnlwdGlvbk9yTm90OiAwLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjdXJyZW50OiAxLAogICAgICAgICAgICBzaXplOiAxMCwKICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgfTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2VsZWN0aW9uQ2hhbmdlKGNhdGVnb3J5TGlzdCkgewogICAgICAgICAgICB0aGlzLmNhdGVnb3J5SWRMaXN0ID0gW107CiAgICAgICAgICAgIGNhdGVnb3J5TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5SWRMaXN0LnB1c2goaXRlbS5pZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgc2VhcmNoQ2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gMTsKICAgICAgICAgICAgdGhpcy5saXN0Q2F0ZWdvcmllcygpOwogICAgICAgIH0sCiAgICAgICAgc2l6ZUNoYW5nZShzaXplKSB7CiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7CiAgICAgICAgICAgIHRoaXMubGlzdENhdGVnb3JpZXMoKTsKICAgICAgICB9LAogICAgICAgIGN1cnJlbnRDaGFuZ2UoY3VycmVudCkgewogICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSBjdXJyZW50OwogICAgICAgICAgICB0aGlzLmxpc3RDYXRlZ29yaWVzKCk7CiAgICAgICAgfSwKICAgICAgICBkZWxldGVDYXRlZ29yeShpZCkgewogICAgICAgICAgICB2YXIgcGFyYW0gPSB7fTsKICAgICAgICAgICAgaWYgKGlkID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHBhcmFtID0geyBkYXRhOiB0aGlzLmNhdGVnb3J5SWRMaXN0IH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwYXJhbSA9IHsgZGF0YTogW2lkXSB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuYXhpb3MKICAgICAgICAgICAgICAgIC5kZWxldGUoIi9hcGkvYWRtaW4vY2F0ZWdvcmllcyIsIHBhcmFtKQogICAgICAgICAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZmxhZykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogIuaIkOWKnyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RDYXRlZ29yaWVzKCk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5aSx6LSlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEZWxldGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgbGlzdENhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIHRoaXMuYXhpb3MKICAgICAgICAgICAgICAgIC5nZXQoIi9hcGkvYWRtaW4vY2F0ZWdvcmllcyIsIHsKICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDogdGhpcy5jdXJyZW50LAogICAgICAgICAgICAgICAgICAgICAgICBzaXplOiB0aGlzLnNpemUsCiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRzOiB0aGlzLmtleXdvcmRzLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSBkYXRhLmRhdGEucmVjb3JkTGlzdDsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gZGF0YS5kYXRhLmNvdW50OwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBvcGVuTW9kZWwoY2F0ZWdvcnkpIHsKICAgICAgICAgICAgaWYgKGNhdGVnb3J5ICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlGb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYXRlZ29yeSkpOwogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5jYXRlZ29yeVRpdGxlLmlubmVySFRNTCA9ICLkv67mlLnliIbnsbsiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUZvcm0uaWQgPSBudWxsOwogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUZvcm0uY2F0ZWdvcnlOYW1lID0gIiI7CiAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLmNhdGVnb3J5VGl0bGUuaW5uZXJIVE1MID0gIua3u+WKoOWIhuexuyI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5hZGRPckVkaXQgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgYWRkT3JFZGl0Q2F0ZWdvcnkoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNhdGVnb3J5Rm9ybS5jYXRlZ29yeU5hbWUudHJpbSgpID09ICIiKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLliIbnsbvlkI3kuI3og73kuLrnqboiKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmF4aW9zCiAgICAgICAgICAgICAgICAucG9zdCgiL2FwaS9hZG1pbi9jYXRlZ29yaWVzIiwgdGhpcy5jYXRlZ29yeUZvcm0pCiAgICAgICAgICAgICAgICAudGhlbigoeyBkYXRhIH0pID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAi5oiQ5YqfIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdENhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICLlpLHotKUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRPckVkaXQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICB9LAp9Owo="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Category.vue","sourceRoot":"src/views/category","sourcesContent":["<template>\n    <el-card class=\"main-card\">\n        <div class=\"title\">{{ this.$route.name }}</div>\n        <!-- 表格操作 -->\n        <div class=\"operation-container\">\n            <el-button\n                type=\"primary\"\n                size=\"small\"\n                icon=\"el-icon-plus\"\n                @click=\"openModel(null)\"\n            >\n                新增\n            </el-button>\n            <el-button\n                type=\"danger\"\n                size=\"small\"\n                icon=\"el-icon-delete\"\n                :disabled=\"this.categoryIdList.length == 0\"\n                @click=\"isDelete = true\"\n            >\n                批量删除\n            </el-button>\n            <div style=\"margin-left: auto\">\n                <el-input\n                    v-model=\"keywords\"\n                    prefix-icon=\"el-icon-search\"\n                    size=\"small\"\n                    placeholder=\"请输入分类名\"\n                    style=\"width: 200px\"\n                    @keyup.enter.native=\"searchCategories\"\n                />\n                <el-button\n                    type=\"primary\"\n                    size=\"small\"\n                    icon=\"el-icon-search\"\n                    style=\"margin-left: 1rem\"\n                    @click=\"searchCategories\"\n                >\n                    搜索\n                </el-button>\n            </div>\n        </div>\n        <!-- 表格展示 -->\n        <el-table\n            border\n            :data=\"categoryList\"\n            @selection-change=\"selectionChange\"\n            v-loading=\"loading\"\n        >\n            <!-- 表格列 -->\n            <el-table-column type=\"selection\" width=\"55\" />\n            <!-- 分类名 -->\n            <el-table-column\n                prop=\"categoryName\"\n                label=\"分类名\"\n                align=\"center\"\n            />\n            <!-- 文章量 -->\n            <el-table-column\n                prop=\"articleCount\"\n                label=\"文章量\"\n                align=\"center\"\n            />\n            <!-- 分类创建时间 -->\n            <el-table-column prop=\"createTime\" label=\"创建时间\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <i class=\"el-icon-time\" style=\"margin-right: 5px\" />\n                    {{ scope.row.createTime | date }}\n                </template>\n            </el-table-column>\n            <!-- 列操作 -->\n            <el-table-column label=\"操作\" width=\"160\" align=\"center\">\n                <template slot-scope=\"scope\">\n                    <el-button\n                        type=\"primary\"\n                        size=\"mini\"\n                        @click=\"openModel(scope.row)\"\n                    >\n                        编辑\n                    </el-button>\n                    <el-popconfirm\n                        title=\"确定删除吗？\"\n                        style=\"margin-left: 1rem\"\n                        @confirm=\"deleteCategory(scope.row.id)\"\n                    >\n                        <el-button size=\"mini\" type=\"danger\" slot=\"reference\">\n                            删除\n                        </el-button>\n                    </el-popconfirm>\n                </template>\n            </el-table-column>\n        </el-table>\n        <!-- 分页 -->\n        <el-pagination\n            class=\"pagination-container\"\n            background\n            @size-change=\"sizeChange\"\n            @current-change=\"currentChange\"\n            :current-page=\"current\"\n            :page-size=\"size\"\n            :total=\"count\"\n            :page-sizes=\"[10, 20]\"\n            layout=\"total, sizes, prev, pager, next, jumper\"\n        />\n        <!-- 批量删除对话框 -->\n        <el-dialog :visible.sync=\"isDelete\" width=\"30%\">\n            <div class=\"dialog-title-container\" slot=\"title\">\n                <i class=\"el-icon-warning\" style=\"color: #ff9900\" />提示\n            </div>\n            <div style=\"font-size: 1rem\">是否删除选中项？</div>\n            <div slot=\"footer\">\n                <el-button @click=\"isDelete = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"deleteCategory(null)\">\n                    确 定\n                </el-button>\n            </div>\n        </el-dialog>\n        <!-- 添加编辑对话框 -->\n        <el-dialog :visible.sync=\"addOrEdit\" width=\"30%\">\n            <div\n                class=\"dialog-title-container\"\n                slot=\"title\"\n                ref=\"categoryTitle\"\n            />\n            <el-form label-width=\"80px\" size=\"medium\" :model=\"categoryForm\">\n                <el-form-item label=\"分类名\">\n                    <el-input\n                        v-model=\"categoryForm.categoryName\"\n                        style=\"width: 220px\"\n                    />\n                </el-form-item>\n                <el-form-item label=\"分类名\">\n                    <el-radio-group v-model=\"categoryForm.encryptionOrNot\">\n                        <el-radio :label=\"0\">不加密</el-radio>\n                        <el-radio :label=\"1\">加密</el-radio>\n                    </el-radio-group>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\">\n                <el-button @click=\"addOrEdit = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"addOrEditCategory\">\n                    确 定\n                </el-button>\n            </div>\n        </el-dialog>\n    </el-card>\n</template>\n\n<script>\nexport default {\n    created() {\n        this.listCategories();\n    },\n    data: function () {\n        return {\n            isDelete: false,\n            loading: true,\n            addOrEdit: false,\n            keywords: null,\n            categoryIdList: [],\n            categoryList: [],\n            categoryForm: {\n                id: null,\n                categoryName: \"\",\n                encryptionOrNot: 0,\n            },\n            current: 1,\n            size: 10,\n            count: 0,\n        };\n    },\n    methods: {\n        selectionChange(categoryList) {\n            this.categoryIdList = [];\n            categoryList.forEach((item) => {\n                this.categoryIdList.push(item.id);\n            });\n        },\n        searchCategories() {\n            this.current = 1;\n            this.listCategories();\n        },\n        sizeChange(size) {\n            this.size = size;\n            this.listCategories();\n        },\n        currentChange(current) {\n            this.current = current;\n            this.listCategories();\n        },\n        deleteCategory(id) {\n            var param = {};\n            if (id == null) {\n                param = { data: this.categoryIdList };\n            } else {\n                param = { data: [id] };\n            }\n            this.axios\n                .delete(\"/api/admin/categories\", param)\n                .then(({ data }) => {\n                    if (data.flag) {\n                        this.$notify.success({\n                            title: \"成功\",\n                            message: data.message,\n                        });\n                        this.listCategories();\n                    } else {\n                        this.$notify.error({\n                            title: \"失败\",\n                            message: data.message,\n                        });\n                    }\n                    this.isDelete = false;\n                });\n        },\n        listCategories() {\n            this.axios\n                .get(\"/api/admin/categories\", {\n                    params: {\n                        current: this.current,\n                        size: this.size,\n                        keywords: this.keywords,\n                    },\n                })\n                .then(({ data }) => {\n                    this.categoryList = data.data.recordList;\n                    this.count = data.data.count;\n                    this.loading = false;\n                });\n        },\n        openModel(category) {\n            if (category != null) {\n                this.categoryForm = JSON.parse(JSON.stringify(category));\n                this.$refs.categoryTitle.innerHTML = \"修改分类\";\n            } else {\n                this.categoryForm.id = null;\n                this.categoryForm.categoryName = \"\";\n                this.$refs.categoryTitle.innerHTML = \"添加分类\";\n            }\n            this.addOrEdit = true;\n        },\n        addOrEditCategory() {\n            if (this.categoryForm.categoryName.trim() == \"\") {\n                this.$message.error(\"分类名不能为空\");\n                return false;\n            }\n            this.axios\n                .post(\"/api/admin/categories\", this.categoryForm)\n                .then(({ data }) => {\n                    if (data.flag) {\n                        this.$notify.success({\n                            title: \"成功\",\n                            message: data.message,\n                        });\n                        this.listCategories();\n                    } else {\n                        this.$notify.error({\n                            title: \"失败\",\n                            message: data.message,\n                        });\n                    }\n                    this.addOrEdit = false;\n                });\n        },\n    },\n};\n</script>\n"]}]}