{"remainingRequest":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/babel-loader/lib/index.js!/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/src/components/Reply.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/src/components/Reply.vue","mtime":1666926022000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEVtb2ppIGZyb20gIi4vRW1vamkiOwppbXBvcnQgRW1vamlMaXN0IGZyb20gIi4uL2Fzc2V0cy9qcy9lbW9qaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBFbW9qaTogRW1vamkKICB9LAogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IE51bWJlcgogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGluZGV4OiAwLAogICAgICBjaG9vc2VFbW9qaTogZmFsc2UsCiAgICAgIG5pY2tuYW1lOiAiIiwKICAgICAgcmVwbHlVc2VySWQ6IG51bGwsCiAgICAgIHBhcmVudElkOiBudWxsLAogICAgICBjb21tZW50Q29udGVudDogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjYW5jbGVSZXBseTogZnVuY3Rpb24gY2FuY2xlUmVwbHkoKSB7CiAgICAgIHRoaXMuJHJlZnMucmVwbHkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0sCiAgICBpbnNlcnRSZXBseTogZnVuY3Rpb24gaW5zZXJ0UmVwbHkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL+WIpOaWreeZu+W9lQogICAgICBpZiAoIXRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJZCkgewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZyA9IHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAodGhpcy5jb21tZW50Q29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogIuWbnuWkjeS4jeiDveS4uuepuiIKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy/op6PmnpDooajmg4UKCgogICAgICB2YXIgcmVnID0gL1xbLis/XF0vZzsKICAgICAgdGhpcy5jb21tZW50Q29udGVudCA9IHRoaXMuY29tbWVudENvbnRlbnQucmVwbGFjZShyZWcsIGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICByZXR1cm4gIjxpbWcgc3JjPSAnIiArIEVtb2ppTGlzdFtzdHJdICsgIicgd2lkdGg9JzI0J2hlaWdodD0nMjQnIHN0eWxlPSdtYXJnaW46IDAgMXB4O3ZlcnRpY2FsLWFsaWduOiB0ZXh0LWJvdHRvbScvPiI7CiAgICAgIH0pOwogICAgICB2YXIgcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICAgIHZhciBhcnIgPSBwYXRoLnNwbGl0KCIvIik7CiAgICAgIHZhciBjb21tZW50ID0gewogICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICByZXBseVVzZXJJZDogdGhpcy5yZXBseVVzZXJJZCwKICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCwKICAgICAgICBjb21tZW50Q29udGVudDogdGhpcy5jb21tZW50Q29udGVudAogICAgICB9OwoKICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgICBjYXNlIDE6CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgY29tbWVudC50b3BpY0lkID0gYXJyWzJdOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgdGhpcy5jb21tZW50Q29udGVudCA9ICIiOwogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvY29tbWVudHMiLCBjb21tZW50KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CgogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIF90aGlzLiRlbWl0KCJyZWxvYWRSZXBseSIsIF90aGlzLmluZGV4KTsKCiAgICAgICAgICBfdGhpcy4kdG9hc3QoewogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlm57lpI3miJDlip8iCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJHRvYXN0KHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEVtb2ppOiBmdW5jdGlvbiBhZGRFbW9qaSh0ZXh0KSB7CiAgICAgIHRoaXMuY29tbWVudENvbnRlbnQgKz0gdGV4dDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Reply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,KAAA,MAAA,SAAA;AACA,OAAA,SAAA,MAAA,oBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAJA;AASA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,CADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAGA,MAAA,QAAA,EAAA,EAHA;AAIA,MAAA,WAAA,EAAA,IAJA;AAKA,MAAA,QAAA,EAAA,IALA;AAMA,MAAA,cAAA,EAAA;AANA,KAAA;AAQA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,OAAA,GAAA,MAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AAAA;;AACA;AACA,UAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA,EAAA;AACA,aAAA,MAAA,CAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACA,eAAA,KAAA;AACA;;AACA,UAAA,KAAA,cAAA,CAAA,IAAA,MAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA;AAAA,UAAA,IAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA;AACA,eAAA,KAAA;AACA,OATA,CAUA;;;AACA,UAAA,GAAA,GAAA,UAAA;AACA,WAAA,cAAA,GAAA,KAAA,cAAA,CAAA,OAAA,CAAA,GAAA,EAAA,UAAA,GAAA,EAAA;AACA,eACA,gBACA,SAAA,CAAA,GAAA,CADA,GAEA,6EAHA;AAKA,OANA,CAAA;AAOA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,IAAA;AACA,UAAA,GAAA,GAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,IAAA,EAAA,KAAA,IADA;AAEA,QAAA,WAAA,EAAA,KAAA,WAFA;AAGA,QAAA,QAAA,EAAA,KAAA,QAHA;AAIA,QAAA,cAAA,EAAA,KAAA;AAJA,OAAA;;AAMA,cAAA,KAAA,IAAA;AACA,aAAA,CAAA;AACA,aAAA,CAAA;AACA,UAAA,OAAA,CAAA,OAAA,GAAA,GAAA,CAAA,CAAA,CAAA;AACA;;AACA;AACA;AANA;;AAQA,WAAA,cAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,eAAA,EAAA,OAAA,EAAA,IAAA,CAAA,gBAAA;AAAA,YAAA,IAAA,QAAA,IAAA;;AACA,YAAA,IAAA,CAAA,IAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,aAAA,EAAA,KAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA;AAAA,YAAA,IAAA,EAAA,SAAA;AAAA,YAAA,OAAA,EAAA;AAAA,WAAA;AACA,SAHA,MAGA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA;AAAA,YAAA,IAAA,EAAA,OAAA;AAAA,YAAA,OAAA,EAAA,IAAA,CAAA;AAAA,WAAA;AACA;AACA,OAPA;AAQA,KAhDA;AAiDA,IAAA,QAjDA,oBAiDA,IAjDA,EAiDA;AACA,WAAA,cAAA,IAAA,IAAA;AACA;AAnDA;AAnBA,CAAA","sourcesContent":["<template>\n  <div class=\"reply-input-wrapper\" style=\"display: none\" ref=\"reply\">\n    <textarea\n      class=\"comment-textarea\"\n      :placeholder=\"'回复 @' + nickname + '：'\"\n      auto-grow\n      dense\n      v-model=\"commentContent\"\n    />\n    <div class=\"emoji-container\">\n      <span\n        :class=\"chooseEmoji ? 'emoji-btn-active' : 'emoji-btn'\"\n        @click=\"chooseEmoji = !chooseEmoji\"\n      >\n        <i class=\"iconfont iconbiaoqing\" />\n      </span>\n      <div style=\"margin-left:auto\">\n        <button @click=\"cancleReply\" class=\"cancle-btn v-comment-btn\">\n          取消\n        </button>\n        <button @click=\"insertReply\" class=\"upload-btn v-comment-btn\">\n          提交\n        </button>\n      </div>\n    </div>\n    <!-- 表情框 -->\n    <emoji @addEmoji=\"addEmoji\" :chooseEmoji=\"chooseEmoji\" />\n  </div>\n</template>\n\n<script>\nimport Emoji from \"./Emoji\";\nimport EmojiList from \"../assets/js/emoji\";\nexport default {\n  components: {\n    Emoji\n  },\n  props: {\n    type: {\n      type: Number\n    }\n  },\n  data: function() {\n    return {\n      index: 0,\n      chooseEmoji: false,\n      nickname: \"\",\n      replyUserId: null,\n      parentId: null,\n      commentContent: \"\"\n    };\n  },\n  methods: {\n    cancleReply() {\n      this.$refs.reply.style.display = \"none\";\n    },\n    insertReply() {\n      //判断登录\n      if (!this.$store.state.userId) {\n        this.$store.state.loginFlag = true;\n        return false;\n      }\n      if (this.commentContent.trim() == \"\") {\n        this.$toast({ type: \"error\", message: \"回复不能为空\" });\n        return false;\n      }\n      //解析表情\n      var reg = /\\[.+?\\]/g;\n      this.commentContent = this.commentContent.replace(reg, function(str) {\n        return (\n          \"<img src= '\" +\n          EmojiList[str] +\n          \"' width='24'height='24' style='margin: 0 1px;vertical-align: text-bottom'/>\"\n        );\n      });\n      const path = this.$route.path;\n      const arr = path.split(\"/\");\n      var comment = {\n        type: this.type,\n        replyUserId: this.replyUserId,\n        parentId: this.parentId,\n        commentContent: this.commentContent\n      };\n      switch (this.type) {\n        case 1:\n        case 3:\n          comment.topicId = arr[2];\n          break;\n        default:\n          break;\n      }\n      this.commentContent = \"\";\n      this.axios.post(\"/api/comments\", comment).then(({ data }) => {\n        if (data.flag) {\n          this.$emit(\"reloadReply\", this.index);\n          this.$toast({ type: \"success\", message: \"回复成功\" });\n        } else {\n          this.$toast({ type: \"error\", message: data.message });\n        }\n      });\n    },\n    addEmoji(text) {\n      this.commentContent += text;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.reply-input-wrapper {\n  border: 1px solid #90939950;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 0 0 10px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}