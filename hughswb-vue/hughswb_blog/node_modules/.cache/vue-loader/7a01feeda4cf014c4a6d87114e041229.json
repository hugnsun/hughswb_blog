{"remainingRequest":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/src/components/model/LoginModel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/src/components/model/LoginModel.vue","mtime":1666926022000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sunwenbo/Downloads/博客/new-blog-master/hughswb_blog/hughswb-vue/hughswb_blog/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBzaG93OiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBsb2dpbkZsYWc6IHsKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUubG9naW5GbGFnID0gdmFsdWU7CiAgICAgIH0sCiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubG9naW5GbGFnOwogICAgICB9CiAgICB9LAogICAgaXNNb2JpbGUoKSB7CiAgICAgIGNvbnN0IGNsaWVudFdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOwogICAgICBpZiAoY2xpZW50V2lkdGggPiA5NjApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgc29jaWFsTG9naW5MaXN0KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYmxvZ0luZm8ud2Vic2l0ZUNvbmZpZy5zb2NpYWxMb2dpbkxpc3Q7CiAgICB9LAogICAgc2hvd0xvZ2luKCkgewogICAgICByZXR1cm4gZnVuY3Rpb24odHlwZSkgewogICAgICAgIHJldHVybiB0aGlzLnNvY2lhbExvZ2luTGlzdC5pbmRleE9mKHR5cGUpICE9IC0xOwogICAgICB9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb3BlblJlZ2lzdGVyKCkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbkZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucmVnaXN0ZXJGbGFnID0gdHJ1ZTsKICAgIH0sCiAgICBvcGVuRm9yZ2V0KCkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbkZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuZm9yZ2V0RmxhZyA9IHRydWU7CiAgICB9LAogICAgbG9naW4oKSB7CiAgICAgIHZhciByZWcgPSAvXltBLVphLXowLTlcdTRlMDAtXHU5ZmE1XStAW2EtekEtWjAtOV8tXSsoXC5bYS16QS1aMC05Xy1dKykrJC87CiAgICAgIGlmICghcmVnLnRlc3QodGhpcy51c2VybmFtZSkpIHsKICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6ICLpgq7nrrHmoLzlvI/kuI3mraPnoa4iIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wYXNzd29yZC50cmltKCkubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6ICLlr4bnoIHkuI3og73kuLrnqboiIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCB0aGF0ID0gdGhpczsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgICAgIHZhciBjYXB0Y2hhID0gbmV3IFRlbmNlbnRDYXB0Y2hhKHRoaXMuY29uZmlnLlRFTkNFTlRfQ0FQVENIQSwgZnVuY3Rpb24oCiAgICAgICAgcmVzCiAgICAgICkgewogICAgICAgIGlmIChyZXMucmV0ID09PSAwKSB7CiAgICAgICAgICAvL+WPkemAgeeZu+W9leivt+axggogICAgICAgICAgbGV0IHBhcmFtID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICAgICAgcGFyYW0uYXBwZW5kKCJ1c2VybmFtZSIsIHRoYXQudXNlcm5hbWUpOwogICAgICAgICAgcGFyYW0uYXBwZW5kKCJwYXNzd29yZCIsIHRoYXQucGFzc3dvcmQpOwogICAgICAgICAgdGhhdC5heGlvcy5wb3N0KCIvYXBpL2xvZ2luIiwgcGFyYW0pLnRoZW4oKHsgZGF0YSB9KSA9PiB7CiAgICAgICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgICAgICB0aGF0LnVzZXJuYW1lID0gIiI7CiAgICAgICAgICAgICAgdGhhdC5wYXNzd29yZCA9ICIiOwogICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmNvbW1pdCgibG9naW4iLCBkYXRhLmRhdGEpOwogICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmNvbW1pdCgiY2xvc2VNb2RlbCIpOwogICAgICAgICAgICAgIHRoYXQuJHRvYXN0KHsgdHlwZTogInN1Y2Nlc3MiLCBtZXNzYWdlOiAi55m75b2V5oiQ5YqfIiB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGF0LiR0b2FzdCh7IHR5cGU6ICJlcnJvciIsIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8g5pi+56S66aqM6K+B56CBCiAgICAgIGNhcHRjaGEuc2hvdygpOwogICAgfSwKICAgIHFxTG9naW4oKSB7CiAgICAgIC8v5L+d55WZ5b2T5YmN6Lev5b6ECiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2F2ZUxvZ2luVXJsIiwgdGhpcy4kcm91dGUucGF0aCk7CiAgICAgIGlmICgKICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKAogICAgICAgICAgLyhpUGhvbmV8aVBvZHxBbmRyb2lkfGlvc3xpT1N8aVBhZHxCYWNrZXJyeXxXZWJPU3xTeW1iaWFufFdpbmRvd3MgUGhvbmV8UGhvbmUpL2kKICAgICAgICApCiAgICAgICkgewogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogICAgICAgIFFDLkxvZ2luLnNob3dQb3B1cCh7CiAgICAgICAgICBhcHBJZDogdGhpcy5jb25maWcuUVFfQVBQX0lELAogICAgICAgICAgcmVkaXJlY3RVUkk6IHRoaXMuY29uZmlnLlFRX1JFRElSRUNUX1VSSQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHdpbmRvdy5vcGVuKAogICAgICAgICAgImh0dHBzOi8vZ3JhcGgucXEuY29tL29hdXRoMi4wL3Nob3c/d2hpY2g9TG9naW4mZGlzcGxheT1wYyZjbGllbnRfaWQ9IiArCiAgICAgICAgICAgICt0aGlzLmNvbmZpZy5RUV9BUFBfSUQgKwogICAgICAgICAgICAiJnJlc3BvbnNlX3R5cGU9dG9rZW4mc2NvcGU9YWxsJnJlZGlyZWN0X3VyaT0iICsKICAgICAgICAgICAgdGhpcy5jb25maWcuUVFfUkVESVJFQ1RfVVJJLAogICAgICAgICAgIl9zZWxmIgogICAgICAgICk7CiAgICAgIH0KICAgIH0sCiAgICB3ZWlib0xvZ2luKCkgewogICAgICAvL+S/neeVmeW9k+WJjei3r+W+hAogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInNhdmVMb2dpblVybCIsIHRoaXMuJHJvdXRlLnBhdGgpOwogICAgICB3aW5kb3cub3BlbigKICAgICAgICAiaHR0cHM6Ly9hcGkud2VpYm8uY29tL29hdXRoMi9hdXRob3JpemU/Y2xpZW50X2lkPSIgKwogICAgICAgICAgdGhpcy5jb25maWcuV0VJQk9fQVBQX0lEICsKICAgICAgICAgICImcmVzcG9uc2VfdHlwZT1jb2RlJnJlZGlyZWN0X3VyaT0iICsKICAgICAgICAgIHRoaXMuY29uZmlnLldFSUJPX1JFRElSRUNUX1VSSSwKICAgICAgICAiX3NlbGYiCiAgICAgICk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["LoginModel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginModel.vue","sourceRoot":"src/components/model","sourcesContent":["<template>\n  <v-dialog v-model=\"loginFlag\" :fullscreen=\"isMobile\" max-width=\"460\">\n    <v-card class=\"login-container\" style=\"border-radius:4px\">\n      <v-icon class=\"float-right\" @click=\"loginFlag = false\">\n        mdi-close\n      </v-icon>\n      <div class=\"login-wrapper\">\n        <!-- 用户名 -->\n        <v-text-field\n          v-model=\"username\"\n          label=\"邮箱号\"\n          placeholder=\"请输入您的邮箱号\"\n          clearable\n          @keyup.enter=\"login\"\n        />\n        <!-- 密码 -->\n        <v-text-field\n          v-model=\"password\"\n          class=\"mt-7\"\n          label=\"密码\"\n          placeholder=\"请输入您的密码\"\n          @keyup.enter=\"login\"\n          :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\n          :type=\"show ? 'text' : 'password'\"\n          @click:append=\"show = !show\"\n        />\n        <!-- 按钮 -->\n        <v-btn\n          class=\"mt-7\"\n          block\n          color=\"blue\"\n          style=\"color:#fff\"\n          @click=\"login\"\n        >\n          登录\n        </v-btn>\n        <!-- 注册和找回密码 -->\n        <div class=\"mt-10 login-tip\">\n          <span @click=\"openRegister\">立即注册</span>\n          <span @click=\"openForget\" class=\"float-right\">忘记密码?</span>\n        </div>\n        <div v-if=\"socialLoginList.length > 0\">\n          <div class=\"social-login-title\">社交账号登录</div>\n          <div class=\"social-login-wrapper\">\n            <!-- 微博登录 -->\n            <a\n              v-if=\"showLogin('weibo')\"\n              class=\"mr-3 iconfont iconweibo\"\n              style=\"color:#e05244\"\n              @click=\"weiboLogin\"\n            />\n            <!-- qq登录 -->\n            <a\n              v-if=\"showLogin('qq')\"\n              class=\"iconfont iconqq\"\n              style=\"color:#00AAEE\"\n              @click=\"qqLogin\"\n            />\n          </div>\n        </div>\n      </div>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script>\nexport default {\n  data: function() {\n    return {\n      username: \"\",\n      password: \"\",\n      show: false\n    };\n  },\n  computed: {\n    loginFlag: {\n      set(value) {\n        this.$store.state.loginFlag = value;\n      },\n      get() {\n        return this.$store.state.loginFlag;\n      }\n    },\n    isMobile() {\n      const clientWidth = document.documentElement.clientWidth;\n      if (clientWidth > 960) {\n        return false;\n      }\n      return true;\n    },\n    socialLoginList() {\n      return this.$store.state.blogInfo.websiteConfig.socialLoginList;\n    },\n    showLogin() {\n      return function(type) {\n        return this.socialLoginList.indexOf(type) != -1;\n      };\n    }\n  },\n  methods: {\n    openRegister() {\n      this.$store.state.loginFlag = false;\n      this.$store.state.registerFlag = true;\n    },\n    openForget() {\n      this.$store.state.loginFlag = false;\n      this.$store.state.forgetFlag = true;\n    },\n    login() {\n      var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\n      if (!reg.test(this.username)) {\n        this.$toast({ type: \"error\", message: \"邮箱格式不正确\" });\n        return false;\n      }\n      if (this.password.trim().length == 0) {\n        this.$toast({ type: \"error\", message: \"密码不能为空\" });\n        return false;\n      }\n      const that = this;\n      // eslint-disable-next-line no-undef\n      var captcha = new TencentCaptcha(this.config.TENCENT_CAPTCHA, function(\n        res\n      ) {\n        if (res.ret === 0) {\n          //发送登录请求\n          let param = new URLSearchParams();\n          param.append(\"username\", that.username);\n          param.append(\"password\", that.password);\n          that.axios.post(\"/api/login\", param).then(({ data }) => {\n            if (data.flag) {\n              that.username = \"\";\n              that.password = \"\";\n              that.$store.commit(\"login\", data.data);\n              that.$store.commit(\"closeModel\");\n              that.$toast({ type: \"success\", message: \"登录成功\" });\n            } else {\n              that.$toast({ type: \"error\", message: data.message });\n            }\n          });\n        }\n      });\n      // 显示验证码\n      captcha.show();\n    },\n    qqLogin() {\n      //保留当前路径\n      this.$store.commit(\"saveLoginUrl\", this.$route.path);\n      if (\n        navigator.userAgent.match(\n          /(iPhone|iPod|Android|ios|iOS|iPad|Backerry|WebOS|Symbian|Windows Phone|Phone)/i\n        )\n      ) {\n        // eslint-disable-next-line no-undef\n        QC.Login.showPopup({\n          appId: this.config.QQ_APP_ID,\n          redirectURI: this.config.QQ_REDIRECT_URI\n        });\n      } else {\n        window.open(\n          \"https://graph.qq.com/oauth2.0/show?which=Login&display=pc&client_id=\" +\n            +this.config.QQ_APP_ID +\n            \"&response_type=token&scope=all&redirect_uri=\" +\n            this.config.QQ_REDIRECT_URI,\n          \"_self\"\n        );\n      }\n    },\n    weiboLogin() {\n      //保留当前路径\n      this.$store.commit(\"saveLoginUrl\", this.$route.path);\n      window.open(\n        \"https://api.weibo.com/oauth2/authorize?client_id=\" +\n          this.config.WEIBO_APP_ID +\n          \"&response_type=code&redirect_uri=\" +\n          this.config.WEIBO_REDIRECT_URI,\n        \"_self\"\n      );\n    }\n  }\n};\n</script>\n\n<style scoped>\n.social-login-title {\n  margin-top: 1.5rem;\n  color: #b5b5b5;\n  font-size: 0.75rem;\n  text-align: center;\n}\n.social-login-title::before {\n  content: \"\";\n  display: inline-block;\n  background-color: #d8d8d8;\n  width: 60px;\n  height: 1px;\n  margin: 0 12px;\n  vertical-align: middle;\n}\n.social-login-title::after {\n  content: \"\";\n  display: inline-block;\n  background-color: #d8d8d8;\n  width: 60px;\n  height: 1px;\n  margin: 0 12px;\n  vertical-align: middle;\n}\n.social-login-wrapper {\n  margin-top: 1rem;\n  font-size: 2rem;\n  text-align: center;\n}\n.social-login-wrapper a {\n  text-decoration: none;\n}\n</style>\n"]}]}